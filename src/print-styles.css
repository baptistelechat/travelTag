/* Styles spécifiques pour l'impression */
@media print {
  /* Masquer tous les éléments par défaut */
  body * {
    visibility: hidden;
  }

  /* Configuration de base de la page A4 */
  @page {
    size: A4 portrait;
    margin: 0;
  }

  /* Styles généraux pour le mode impression */
  html.print-mode {
    height: 100%;
    overflow: visible;
  }

  html.print-mode body {
    height: 100%;
    overflow: visible;
  }

  /* Styles pour l'affichage d'un seul QR code */
  body.print-single #qrcode-display,
  body.print-single #qrcode-display * {
    visibility: visible !important;
  }

  body.print-single #qrcode-display {
    position: fixed;
    top: 0;
    left: 0;
    width: 210mm; /* Largeur A4 */
    height: 297mm; /* Hauteur A4 */
    margin: 0;
    padding: 0;
    border: none;
    display: flex;
    justify-content: center;
    align-items: center;
    box-sizing: border-box;
    page-break-after: avoid;
    page-break-before: avoid;
    page-break-inside: avoid;
  }

  body.print-single {
    height: 297mm; /* Hauteur exacte A4 */
    width: 210mm; /* Largeur exacte A4 */
    overflow: hidden;
    page-break-after: avoid;
  }

  body.print-single #qrcode-display .border-dashed {
    border: none !important;
    padding: 20px !important;
  }

  body.print-single #qrcode-display .p-6 {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    width: 100% !important;
    height: 100% !important;
    padding: 20mm !important;
  }

  body.print-single #qrcode-display svg {
    width: 150mm !important;
    height: 150mm !important;
    display: block !important;
    margin: 0 auto !important;
  }

  body.print-single #qrcode-display .text-center,
  body.print-single #qrcode-display .font-medium {
    color: black !important;
    margin: 10mm 0 !important;
    text-align: center !important;
    font-size: 24pt !important;
    font-weight: bold !important;
  }

  body.print-single #qrcode-display .text-xs,
  body.print-single #qrcode-display .text-gray-500 {
    color: black !important;
    margin: 10mm 0 !important;
    text-align: center !important;
    font-size: 14pt !important;
  }

  /* Styles pour l'affichage en grille de QR codes */
  /* Par défaut, la grille est cachée */
  #qrcode-grid,
  #print-grid-container,
  .print-grid-container {
    visibility: hidden;
    display: none;
  }

  /* La grille n'est visible qu'en mode d'impression grid */
  body.print-grid #qrcode-grid,
  body.print-grid #print-grid-container,
  body.print-grid .print-grid-container {
    visibility: visible !important;
    display: block !important;
  }

  body.print-grid #qrcode-grid *,
  body.print-grid #print-grid-container *,
  body.print-grid .print-grid-container * {
    visibility: visible !important;
  }

  /* Conteneur principal de la grille */
  body.print-grid #qrcode-grid {
    position: absolute;
    top: 0;
    left: 0;
    width: 210mm; /* Largeur A4 */
    height: 297mm; /* Hauteur A4 */
    padding: 10mm; /* Marge intérieure */
    box-sizing: border-box;
    background-color: white !important;
    z-index: 9999 !important;
    visibility: visible !important;
    display: block !important;
    overflow: hidden !important;
  }

  /* Conteneur de la grille */
  body.print-grid .grid-container {
    display: grid !important;
    grid-template-columns: repeat(2, 1fr) !important; /* 2 colonnes */
    grid-template-rows: repeat(3, 1fr) !important; /* 3 lignes */
    gap: 5mm !important; /* Espacement entre les éléments */
    width: 100% !important;
    height: 100% !important;
    background-color: white !important;
    visibility: visible !important;
    margin: 0 auto !important; /* Centre la grille */
  }

  /* Élément individuel de la grille */
  body.print-grid .qrcode-item {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 5mm !important;
    background-color: white !important;
    visibility: visible !important;
    page-break-inside: avoid !important;
    box-sizing: border-box !important;
  }

  /* Contenu du QR code */
  body.print-grid .qrcode-content {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    width: 100% !important;
    height: 100% !important;
    background-color: white !important;
    visibility: visible !important;
  }

  /* Nom au-dessus du QR code */
  body.print-grid .qrcode-name {
    font-weight: 500 !important;
    margin-bottom: 3mm !important;
    text-align: center !important;
    color: black !important;
    font-size: 12pt !important;
  }

  /* Conteneur du SVG du QR code */
  body.print-grid .qrcode-svg-container {
    width: 100% !important;
    height: auto !important;
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    margin: 0 auto !important;
    background-color: white !important;
    visibility: visible !important;
  }

  /* SVG du QR code */
  body.print-grid .qrcode-svg-container svg {
    width: 100% !important;
    height: auto !important;
    max-width: 60mm !important; /* Taille maximale adaptée à l'espace disponible */
    max-height: 60mm !important;
    display: block !important;
    margin: 0 auto !important;
    background-color: white !important;
    color: black !important;
    visibility: visible !important;
  }

  /* URL sous le QR code */
  body.print-grid .qrcode-url {
    font-size: 8pt !important;
    color: black !important;
    margin-top: 3mm !important;
    text-align: center !important;
  }

  /* Message quand aucune donnée n'est disponible */
  body.print-grid .print-message {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 16px;
    color: black !important;
    text-align: center;
    width: 80%;
    padding: 20px;
    border: 1px solid #ccc;
    background-color: white;
  }
}
